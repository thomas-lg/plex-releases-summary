services:
  app:
    image: ghcr.io/thomas-lg/plex-releases-summary:latest
    container_name: plex-releases-summary
    volumes:
      - ./configs:/app/configs:rw
      - ./logs:/app/logs:rw
      - ./secrets:/run/secrets:ro

    # Environment variables for configuration
    # Only 2 required: TAUTULLI_URL and TAUTULLI_API_KEY
    # For full configuration options, see: CONFIGURATION.md#environment-variables-and-docker
    environment:
      # ========== REQUIRED ==========
      - TAUTULLI_URL=http://tautulli:8181
      - TAUTULLI_API_KEY=/run/secrets/tautulli_api_key

    # -------------------------------------------------------------------------
    # NETWORKING
    # -------------------------------------------------------------------------
    # This container must reach the Tautulli service by hostname.
    # If Tautulli runs in a separate Compose project, attach this container to
    # its network.  Example (replace <tautulli_project> with the actual name):
    #
    #   networks:
    #     - <tautulli_project>_default
    #
    # networks:
    #   <tautulli_project>_default:
    #     external: true
    #
    # If Tautulli is in the SAME Compose file, add both services to a shared
    # network instead and remove the block above.
    # -------------------------------------------------------------------------

    logging:
      driver: json-file
      options:
        max-size: "5m"
        max-file: "5"

    restart: on-failure
# Optional: Docker Compose secrets (alternative to volume-mounted secrets)
# Uncomment to use Docker secrets instead of volume-mounted files
# secrets:
#   tautulli_api_key:
#     file: ./secrets/tautulli_api_key
#   discord_webhook:
#     file: ./secrets/discord_webhook
