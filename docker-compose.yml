services:
  app:
    image: ghcr.io/thomas-lg/plex-releases-summary:latest
    container_name: plex-releases-summary
    volumes:
      - ./configs:/app/configs:rw
      - ./logs:/app/logs:rw
      - ./secrets:/run/secrets:ro

    # Environment variables for configuration
    # Only 2 required: TAUTULLI_URL and TAUTULLI_API_KEY
    # For full configuration options, see: docs/CONFIGURATION.md#environment-variables-and-docker
    environment:
      # ========== REQUIRED ==========
      - TAUTULLI_URL=http://tautulli:8181
      - TAUTULLI_API_KEY=/run/secrets/tautulli_api_key

    logging:
      driver: json-file
      options:
        max-size: "5m"
        max-file: "5"

    restart: on-failure
# Optional: Docker Compose secrets (alternative to volume-mounted secrets)
# Uncomment to use Docker secrets instead of volume-mounted files
# secrets:
#   tautulli_api_key:
#     file: ./secrets/tautulli_api_key
#   discord_webhook:
#     file: ./secrets/discord_webhook
